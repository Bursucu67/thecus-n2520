<?php
require_once(INCLUDE_ROOT.'sqlitedb.class.php');
require_once(INCLUDE_ROOT.'function.php');
get_sysconf();

$words = $session->PageCode("time");

$db = new sqlitedb();
//load Time default value
$ntp_cfg_mode=$db->getvar("ntp_cfg_mode","yes");
$ntp_server_mode=$db->getvar("ntp_server_mode","0");
$ntp_server=$db->getvar("ntp_server","");
unset($db);

$datetime = explode(" ",str_replace("\n","",shell_exec('date "+%Y %m %d %H %M %S"')));
$date_str = $datetime[1]."/".$datetime[2]."/".$datetime[0];
$time_str = $datetime[3].":".$datetime[4];

//timezone Array
$timezone_fields="['display', 'value']";
$timezone_data = "[";
        $timezone_data .= "['US/Alaska','US/Alaska'],";
        $timezone_data .= "['US/Aleutian','US/Aleutian'],";
        $timezone_data .= "['US/Arizona','US/Arizona'],";
        $timezone_data .= "['US/Central','US/Central'],";
        $timezone_data .= "['US/East-Indiana','US/East-Indiana'],";
        $timezone_data .= "['US/Eastern','US/Eastern'],";
        $timezone_data .= "['US/Hawaii','US/Hawaii'],";
        $timezone_data .= "['US/Indiana-Starke','US/Indiana-Starke'],";
        $timezone_data .= "['US/Michigan','US/Michigan'],";
        $timezone_data .= "['US/Mountain','US/Mountain'],";
        $timezone_data .= "['US/Pacific','US/Pacific'],";
        $timezone_data .= "['US/Samoa','US/Samoa'],";
        $timezone_data .= "['Africa/Abidjan','Africa/Abidjan'],";
        $timezone_data .= "['Africa/Accra','Africa/Accra'],";
        $timezone_data .= "['Africa/Addis_Ababa','Africa/Addis_Ababa'],";
        $timezone_data .= "['Africa/Algiers','Africa/Algiers'],";
        $timezone_data .= "['Africa/Asmera','Africa/Asmera'],";
        $timezone_data .= "['Africa/Bamako','Africa/Bamako'],";
        $timezone_data .= "['Africa/Bangui','Africa/Bangui'],";
        $timezone_data .= "['Africa/Banjul','Africa/Banjul'],";
        $timezone_data .= "['Africa/Bissau','Africa/Bissau'],";
        $timezone_data .= "['Africa/Blantyre','Africa/Blantyre'],";
        $timezone_data .= "['Africa/Brazzaville','Africa/Brazzaville'],";
        $timezone_data .= "['Africa/Bujumbura','Africa/Bujumbura'],";
        $timezone_data .= "['Africa/Cairo','Africa/Cairo'],";
        $timezone_data .= "['Africa/Casablanca','Africa/Casablanca'],";
        $timezone_data .= "['Africa/Ceuta','Africa/Ceuta'],";
        $timezone_data .= "['Africa/Conakry','Africa/Conakry'],";
        $timezone_data .= "['Africa/Dakar','Africa/Dakar'],";
        $timezone_data .= "['Africa/Dar_es_Salaam','Africa/Dar_es_Salaam'],";
        $timezone_data .= "['Africa/Djibouti','Africa/Djibouti'],";
        $timezone_data .= "['Africa/Douala','Africa/Douala'],";
        $timezone_data .= "['Africa/El_Aaiun','Africa/El_Aaiun'],";
        $timezone_data .= "['Africa/Freetown','Africa/Freetown'],";
        $timezone_data .= "['Africa/Gaborone','Africa/Gaborone'],";
        $timezone_data .= "['Africa/Harare','Africa/Harare'],";
        $timezone_data .= "['Africa/Johannesburg','Africa/Johannesburg'],";
        $timezone_data .= "['Africa/Kampala','Africa/Kampala'],";
        $timezone_data .= "['Africa/Khartoum','Africa/Khartoum'],";
        $timezone_data .= "['Africa/Kigali','Africa/Kigali'],";
        $timezone_data .= "['Africa/Kinshasa','Africa/Kinshasa'],";
        $timezone_data .= "['Africa/Lagos','Africa/Lagos'],";
        $timezone_data .= "['Africa/Libreville','Africa/Libreville'],";
        $timezone_data .= "['Africa/Lome','Africa/Lome'],";
        $timezone_data .= "['Africa/Luanda','Africa/Luanda'],";
        $timezone_data .= "['Africa/Lubumbashi','Africa/Lubumbashi'],";
        $timezone_data .= "['Africa/Lusaka','Africa/Lusaka'],";
        $timezone_data .= "['Africa/Malabo','Africa/Malabo'],";
        $timezone_data .= "['Africa/Maputo','Africa/Maputo'],";
        $timezone_data .= "['Africa/Maseru','Africa/Maseru'],";
        $timezone_data .= "['Africa/Mbabane','Africa/Mbabane'],";
        $timezone_data .= "['Africa/Mogadishu','Africa/Mogadishu'],";
        $timezone_data .= "['Africa/Monrovia','Africa/Monrovia'],";
        $timezone_data .= "['Africa/Nairobi','Africa/Nairobi'],";
        $timezone_data .= "['Africa/Ndjamena','Africa/Ndjamena'],";
        $timezone_data .= "['Africa/Niamey','Africa/Niamey'],";
        $timezone_data .= "['Africa/Nouakchott','Africa/Nouakchott'],";
        $timezone_data .= "['Africa/Ouagadougou','Africa/Ouagadougou'],";
        $timezone_data .= "['Africa/Porto-Novo','Africa/Porto-Novo'],";
        $timezone_data .= "['Africa/Sao_Tome','Africa/Sao_Tome'],";
        $timezone_data .= "['Africa/Timbuktu','Africa/Timbuktu'],";
        $timezone_data .= "['Africa/Tripoli','Africa/Tripoli'],";
        $timezone_data .= "['Africa/Tunis','Africa/Tunis'],";
        $timezone_data .= "['Africa/Windhoek','Africa/Windhoek'],";
        $timezone_data .= "['America/Adak','America/Adak'],";
        $timezone_data .= "['America/Anchorage','America/Anchorage'],";
        $timezone_data .= "['America/Anguilla','America/Anguilla'],";
        $timezone_data .= "['America/Antigua','America/Antigua'],";
        $timezone_data .= "['America/Araguaina','America/Araguaina'],";
        $timezone_data .= "['America/Aruba','America/Aruba'],";
        $timezone_data .= "['America/Asuncion','America/Asuncion'],";
        $timezone_data .= "['America/Atka','America/Atka'],";
        $timezone_data .= "['America/Barbados','America/Barbados'],";
        $timezone_data .= "['America/Belem','America/Belem'],";
        $timezone_data .= "['America/Belize','America/Belize'],";
        $timezone_data .= "['America/Boa_Vista','America/Boa_Vista'],";
        $timezone_data .= "['America/Bogota','America/Bogota'],";
        $timezone_data .= "['America/Boise','America/Boise'],";
        $timezone_data .= "['America/Buenos_Aires','America/Buenos_Aires'],";
        $timezone_data .= "['America/Cambridge_Bay','America/Cambridge_Bay'],";
        $timezone_data .= "['America/Cancun','America/Cancun'],";
        $timezone_data .= "['America/Caracas','America/Caracas'],";
        $timezone_data .= "['America/Catamarca','America/Catamarca'],";
        $timezone_data .= "['America/Cayenne','America/Cayenne'],";
        $timezone_data .= "['America/Cayman','America/Cayman'],";
        $timezone_data .= "['America/Chicago','America/Chicago'],";
        $timezone_data .= "['America/Chihuahua','America/Chihuahua'],";
        $timezone_data .= "['America/Cordoba','America/Cordoba'],";
        $timezone_data .= "['America/Costa_Rica','America/Costa_Rica'],";
        $timezone_data .= "['America/Cuiaba','America/Cuiaba'],";
        $timezone_data .= "['America/Curacao','America/Curacao'],";
        $timezone_data .= "['America/Dawson','America/Dawson'],";
        $timezone_data .= "['America/Dawson_Creek','America/Dawson_Creek'],";
        $timezone_data .= "['America/Denver','America/Denver'],";
        $timezone_data .= "['America/Detroit','America/Detroit'],";
        $timezone_data .= "['America/Dominica','America/Dominica'],";
        $timezone_data .= "['America/Edmonton','America/Edmonton'],";
        $timezone_data .= "['America/Eirunepe','America/Eirunepe'],";
        $timezone_data .= "['America/El_Salvador','America/El_Salvador'],";
        $timezone_data .= "['America/Ensenada','America/Ensenada'],";
        $timezone_data .= "['America/Fort_Wayne','America/Fort_Wayne'],";
        $timezone_data .= "['America/Fortaleza','America/Fortaleza'],";
        $timezone_data .= "['America/Glace_Bay','America/Glace_Bay'],";
        $timezone_data .= "['America/Godthab','America/Godthab'],";
        $timezone_data .= "['America/Goose_Bay','America/Goose_Bay'],";
        $timezone_data .= "['America/Grand_Turk','America/Grand_Turk'],";
        $timezone_data .= "['America/Grenada','America/Grenada'],";
        $timezone_data .= "['America/Guadeloupe','America/Guadeloupe'],";
        $timezone_data .= "['America/Guatemala','America/Guatemala'],";
        $timezone_data .= "['America/Guayaquil','America/Guayaquil'],";
        $timezone_data .= "['America/Guyana','America/Guyana'],";
        $timezone_data .= "['America/Halifax','America/Halifax'],";
        $timezone_data .= "['America/Havana','America/Havana'],";
        $timezone_data .= "['America/Hermosillo','America/Hermosillo'],";
        $timezone_data .= "['America/Indiana/Indianapolis','America/Indiana/Indianapolis'],";
        $timezone_data .= "['America/Indiana/Knox','America/Indiana/Knox'],";
        $timezone_data .= "['America/Indiana/Marengo','America/Indiana/Marengo'],";
        $timezone_data .= "['America/Indiana/Vevay','America/Indiana/Vevay'],";
        $timezone_data .= "['America/Indianapolis','America/Indianapolis'],";
        $timezone_data .= "['America/Inuvik','America/Inuvik'],";
        $timezone_data .= "['America/Iqaluit','America/Iqaluit'],";
        $timezone_data .= "['America/Jamaica','America/Jamaica'],";
        $timezone_data .= "['America/Jujuy','America/Jujuy'],";
        $timezone_data .= "['America/Juneau','America/Juneau'],";
        $timezone_data .= "['America/Kentucky/Louisville','America/Kentucky/Louisville'],";
        $timezone_data .= "['America/Kentucky/Monticello','America/Kentucky/Monticello'],";
        $timezone_data .= "['America/Knox_IN','America/Knox_IN'],";
        $timezone_data .= "['America/La_Paz','America/La_Paz'],";
        $timezone_data .= "['America/Lima','America/Lima'],";
        $timezone_data .= "['America/Los_Angeles','America/Los_Angeles'],";
        $timezone_data .= "['America/Louisville','America/Louisville'],";
        $timezone_data .= "['America/Maceio','America/Maceio'],";
        $timezone_data .= "['America/Managua','America/Managua'],";
        $timezone_data .= "['America/Manaus','America/Manaus'],";
        $timezone_data .= "['America/Martinique','America/Martinique'],";
        $timezone_data .= "['America/Mazatlan','America/Mazatlan'],";
        $timezone_data .= "['America/Mendoza','America/Mendoza'],";
        $timezone_data .= "['America/Menominee','America/Menominee'],";
        $timezone_data .= "['America/Merida','America/Merida'],";
        $timezone_data .= "['America/Mexico_City','America/Mexico_City'],";
        $timezone_data .= "['America/Miquelon','America/Miquelon'],";
        $timezone_data .= "['America/Monterrey','America/Monterrey'],";
        $timezone_data .= "['America/Montevideo','America/Montevideo'],";
        $timezone_data .= "['America/Montreal','America/Montreal'],";
        $timezone_data .= "['America/Montserrat','America/Montserrat'],";
        $timezone_data .= "['America/Nassau','America/Nassau'],";
        $timezone_data .= "['America/New_York','America/New_York'],";
        $timezone_data .= "['America/Nipigon','America/Nipigon'],";
        $timezone_data .= "['America/Nome','America/Nome'],";
        $timezone_data .= "['America/Noronha','America/Noronha'],";
        $timezone_data .= "['America/Panama','America/Panama'],";
        $timezone_data .= "['America/Pangnirtung','America/Pangnirtung'],";
        $timezone_data .= "['America/Paramaribo','America/Paramaribo'],";
        $timezone_data .= "['America/Phoenix','America/Phoenix'],";
        $timezone_data .= "['America/Port-au-Prince','America/Port-au-Prince'],";
        $timezone_data .= "['America/Port_of_Spain','America/Port_of_Spain'],";
        $timezone_data .= "['America/Porto_Acre','America/Porto_Acre'],";
        $timezone_data .= "['America/Porto_Velho','America/Porto_Velho'],";
        $timezone_data .= "['America/Puerto_Rico','America/Puerto_Rico'],";
        $timezone_data .= "['America/Rainy_River','America/Rainy_River'],";
        $timezone_data .= "['America/Rankin_Inlet','America/Rankin_Inlet'],";
        $timezone_data .= "['America/Recife','America/Recife'],";
        $timezone_data .= "['America/Regina','America/Regina'],";
        $timezone_data .= "['America/Rosario','America/Rosario'],";
        $timezone_data .= "['America/Santiago','America/Santiago'],";
        $timezone_data .= "['America/Santo_Domingo','America/Santo_Domingo'],";
        $timezone_data .= "['America/Sao_Paulo','America/Sao_Paulo'],";
        $timezone_data .= "['America/Scoresbysund','America/Scoresbysund'],";
        $timezone_data .= "['America/Shiprock','America/Shiprock'],";
        $timezone_data .= "['America/St_Johns','America/St_Johns'],";
        $timezone_data .= "['America/St_Kitts','America/St_Kitts'],";
        $timezone_data .= "['America/St_Lucia','America/St_Lucia'],";
        $timezone_data .= "['America/St_Thomas','America/St_Thomas'],";
        $timezone_data .= "['America/St_Vincent','America/St_Vincent'],";
        $timezone_data .= "['America/Swift_Current','America/Swift_Current'],";
        $timezone_data .= "['America/Tegucigalpa','America/Tegucigalpa'],";
        $timezone_data .= "['America/Thule','America/Thule'],";
        $timezone_data .= "['America/Thunder_Bay','America/Thunder_Bay'],";
        $timezone_data .= "['America/Tijuana','America/Tijuana'],";
        $timezone_data .= "['America/Tortola','America/Tortola'],";
        $timezone_data .= "['America/Vancouver','America/Vancouver'],";
        $timezone_data .= "['America/Virgin','America/Virgin'],";
        $timezone_data .= "['America/Whitehorse','America/Whitehorse'],";
        $timezone_data .= "['America/Winnipeg','America/Winnipeg'],";
        $timezone_data .= "['America/Yakutat','America/Yakutat'],";
        $timezone_data .= "['America/Yellowknife','America/Yellowknife'],";
        $timezone_data .= "['Antarctica/Casey','Antarctica/Casey'],";
        $timezone_data .= "['Antarctica/Davis','Antarctica/Davis'],";
        $timezone_data .= "['Antarctica/DumontDUrville','Antarctica/DumontDUrville'],";
        $timezone_data .= "['Antarctica/Mawson','Antarctica/Mawson'],";
        $timezone_data .= "['Antarctica/McMurdo','Antarctica/McMurdo'],";
        $timezone_data .= "['Antarctica/Palmer','Antarctica/Palmer'],";
        $timezone_data .= "['Antarctica/South_Pole','Antarctica/South_Pole'],";
        $timezone_data .= "['Antarctica/Syowa','Antarctica/Syowa'],";
        $timezone_data .= "['Arctic/Longyearbyen','Arctic/Longyearbyen'],";
        $timezone_data .= "['Asia/Aden','Asia/Aden'],";
        $timezone_data .= "['Asia/Almaty','Asia/Almaty'],";
        $timezone_data .= "['Asia/Amman','Asia/Amman'],";
        $timezone_data .= "['Asia/Anadyr','Asia/Anadyr'],";
        $timezone_data .= "['Asia/Aqtau','Asia/Aqtau'],";
        $timezone_data .= "['Asia/Aqtobe','Asia/Aqtobe'],";
        $timezone_data .= "['Asia/Ashgabat','Asia/Ashgabat'],";
        $timezone_data .= "['Asia/Ashkhabad','Asia/Ashkhabad'],";
        $timezone_data .= "['Asia/Baghdad','Asia/Baghdad'],";
        $timezone_data .= "['Asia/Bahrain','Asia/Bahrain'],";
        $timezone_data .= "['Asia/Baku','Asia/Baku'],";
        $timezone_data .= "['Asia/Bangkok','Asia/Bangkok'],";
        $timezone_data .= "['Asia/Beijing','Asia/Beijing'],";
        $timezone_data .= "['Asia/Beirut','Asia/Beirut'],";
        $timezone_data .= "['Asia/Bishkek','Asia/Bishkek'],";
        $timezone_data .= "['Asia/Brunei','Asia/Brunei'],";
        $timezone_data .= "['Asia/Calcutta','Asia/Calcutta'],";
        $timezone_data .= "['Asia/Chungking','Asia/Chungking'],";
        $timezone_data .= "['Asia/Colombo','Asia/Colombo'],";
        $timezone_data .= "['Asia/Dacca','Asia/Dacca'],";
        $timezone_data .= "['Asia/Damascus','Asia/Damascus'],";
        $timezone_data .= "['Asia/Dhaka','Asia/Dhaka'],";
        $timezone_data .= "['Asia/Dili','Asia/Dili'],";
        $timezone_data .= "['Asia/Dubai','Asia/Dubai'],";
        $timezone_data .= "['Asia/Dushanbe','Asia/Dushanbe'],";
        $timezone_data .= "['Asia/Gaza','Asia/Gaza'],";
        $timezone_data .= "['Asia/Harbin','Asia/Harbin'],";
        $timezone_data .= "['Asia/Hong_Kong','Asia/Hong_Kong'],";
        $timezone_data .= "['Asia/Hovd','Asia/Hovd'],";
        $timezone_data .= "['Asia/Irkutsk','Asia/Irkutsk'],";
        $timezone_data .= "['Asia/Istanbul','Asia/Istanbul'],";
        $timezone_data .= "['Asia/Jakarta','Asia/Jakarta'],";
        $timezone_data .= "['Asia/Jayapura','Asia/Jayapura'],";
        $timezone_data .= "['Asia/Jerusalem','Asia/Jerusalem'],";
        $timezone_data .= "['Asia/Kabul','Asia/Kabul'],";
        $timezone_data .= "['Asia/Kamchatka','Asia/Kamchatka'],";
        $timezone_data .= "['Asia/Karachi','Asia/Karachi'],";
        $timezone_data .= "['Asia/Kashgar','Asia/Kashgar'],";
        $timezone_data .= "['Asia/Katmandu','Asia/Katmandu'],";
        $timezone_data .= "['Asia/Krasnoyarsk','Asia/Krasnoyarsk'],";
        $timezone_data .= "['Asia/Kuala_Lumpur','Asia/Kuala_Lumpur'],";
        $timezone_data .= "['Asia/Kuching','Asia/Kuching'],";
        $timezone_data .= "['Asia/Kuwait','Asia/Kuwait'],";
        $timezone_data .= "['Asia/Macao','Asia/Macao'],";
        $timezone_data .= "['Asia/Macau','Asia/Macau'],";
        $timezone_data .= "['Asia/Magadan','Asia/Magadan'],";
        $timezone_data .= "['Asia/Makassar','Asia/Makassar'],";
        $timezone_data .= "['Asia/Manila','Asia/Manila'],";
        $timezone_data .= "['Asia/Muscat','Asia/Muscat'],";
        $timezone_data .= "['Asia/Nicosia','Asia/Nicosia'],";
        $timezone_data .= "['Asia/Novosibirsk','Asia/Novosibirsk'],";
        $timezone_data .= "['Asia/Omsk','Asia/Omsk'],";
        $timezone_data .= "['Asia/Oral','Asia/Oral'],";
        $timezone_data .= "['Asia/Phnom_Penh','Asia/Phnom_Penh'],";
        $timezone_data .= "['Asia/Pyongyang','Asia/Pyongyang'],";
        $timezone_data .= "['Asia/Qatar','Asia/Qatar'],";
        $timezone_data .= "['Asia/Qyzylorda','Asia/Qyzylorda'],";
        $timezone_data .= "['Asia/Rangoon','Asia/Rangoon'],";
        $timezone_data .= "['Asia/Riyadh','Asia/Riyadh'],";
        $timezone_data .= "['Asia/Riyadh87','Asia/Riyadh87'],";
        $timezone_data .= "['Asia/Riyadh88','Asia/Riyadh88'],";
        $timezone_data .= "['Asia/Riyadh89','Asia/Riyadh89'],";
        $timezone_data .= "['Asia/Saigon','Asia/Saigon'],";
        $timezone_data .= "['Asia/Samarkand','Asia/Samarkand'],";
        $timezone_data .= "['Asia/Seoul','Asia/Seoul'],";
        $timezone_data .= "['Asia/Shanghai','Asia/Shanghai'],";
        $timezone_data .= "['Asia/Singapore','Asia/Singapore'],";
        $timezone_data .= "['Asia/Taipei','Asia/Taipei'],";
        $timezone_data .= "['Asia/Tashkent','Asia/Tashkent'],";
        $timezone_data .= "['Asia/Tbilisi','Asia/Tbilisi'],";
        $timezone_data .= "['Asia/Tehran','Asia/Tehran'],";
        $timezone_data .= "['Asia/Tel_Aviv','Asia/Tel_Aviv'],";
        $timezone_data .= "['Asia/Thimbu','Asia/Thimbu'],";
        $timezone_data .= "['Asia/Thimphu','Asia/Thimphu'],";
        $timezone_data .= "['Asia/Tokyo','Asia/Tokyo'],";
        $timezone_data .= "['Asia/Ujung_Pandang','Asia/Ujung_Pandang'],";
        $timezone_data .= "['Asia/Ulaanbaatar','Asia/Ulaanbaatar'],";
        $timezone_data .= "['Asia/Ulan_Bator','Asia/Ulan_Bator'],";
        $timezone_data .= "['Asia/Urumqi','Asia/Urumqi'],";
        $timezone_data .= "['Asia/Vientiane','Asia/Vientiane'],";
        $timezone_data .= "['Asia/Vladivostok','Asia/Vladivostok'],";
        $timezone_data .= "['Asia/Yakutsk','Asia/Yakutsk'],";
        $timezone_data .= "['Asia/Yekaterinburg','Asia/Yekaterinburg'],";
        $timezone_data .= "['Asia/Yerevan','Asia/Yerevan'],";
        $timezone_data .= "['Atlantic/Azores','Atlantic/Azores'],";
        $timezone_data .= "['Atlantic/Bermuda','Atlantic/Bermuda'],";
        $timezone_data .= "['Atlantic/Canary','Atlantic/Canary'],";
        $timezone_data .= "['Atlantic/Cape_Verde','Atlantic/Cape_Verde'],";
        $timezone_data .= "['Atlantic/Faeroe','Atlantic/Faeroe'],";
        $timezone_data .= "['Atlantic/Jan_Mayen','Atlantic/Jan_Mayen'],";
        $timezone_data .= "['Atlantic/Madeira','Atlantic/Madeira'],";
        $timezone_data .= "['Atlantic/Reykjavik','Atlantic/Reykjavik'],";
        $timezone_data .= "['Atlantic/South_Georgia','Atlantic/South_Georgia'],";
        $timezone_data .= "['Atlantic/St_Helena','Atlantic/St_Helena'],";
        $timezone_data .= "['Atlantic/Stanley','Atlantic/Stanley'],";
        $timezone_data .= "['Australia/ACT','Australia/ACT'],";
        $timezone_data .= "['Australia/Adelaide','Australia/Adelaide'],";
        $timezone_data .= "['Australia/Brisbane','Australia/Brisbane'],";
        $timezone_data .= "['Australia/Broken_Hill','Australia/Broken_Hill'],";
        $timezone_data .= "['Australia/Canberra','Australia/Canberra'],";
        $timezone_data .= "['Australia/Darwin','Australia/Darwin'],";
        $timezone_data .= "['Australia/Hobart','Australia/Hobart'],";
        $timezone_data .= "['Australia/LHI','Australia/LHI'],";
        $timezone_data .= "['Australia/Lindeman','Australia/Lindeman'],";
        $timezone_data .= "['Australia/Lord_Howe','Australia/Lord_Howe'],";
        $timezone_data .= "['Australia/Melbourne','Australia/Melbourne'],";
        $timezone_data .= "['Australia/NSW','Australia/NSW'],";
        $timezone_data .= "['Australia/North','Australia/North'],";
        $timezone_data .= "['Australia/Perth','Australia/Perth'],";
        $timezone_data .= "['Australia/Queensland','Australia/Queensland'],";
        $timezone_data .= "['Australia/South','Australia/South'],";
        $timezone_data .= "['Australia/Sydney','Australia/Sydney'],";
        $timezone_data .= "['Australia/Tasmania','Australia/Tasmania'],";
        $timezone_data .= "['Australia/Victoria','Australia/Victoria'],";
        $timezone_data .= "['Australia/West','Australia/West'],";
        $timezone_data .= "['Australia/Yancowinna','Australia/Yancowinna'],";
        $timezone_data .= "['Brazil/Acre','Brazil/Acre'],";
        $timezone_data .= "['Brazil/DeNoronha','Brazil/DeNoronha'],";
        $timezone_data .= "['Brazil/East','Brazil/East'],";
        $timezone_data .= "['Brazil/West','Brazil/West'],";
        $timezone_data .= "['CET','CET'],";
        $timezone_data .= "['CST6CDT','CST6CDT'],";
        $timezone_data .= "['Canada/Atlantic','Canada/Atlantic'],";
        $timezone_data .= "['Canada/Central','Canada/Central'],";
        $timezone_data .= "['Canada/East-Saskatchewan','Canada/East-Saskatchewan'],";
        $timezone_data .= "['Canada/Eastern','Canada/Eastern'],";
        $timezone_data .= "['Canada/Mountain','Canada/Mountain'],";
        $timezone_data .= "['Canada/Newfoundland','Canada/Newfoundland'],";
        $timezone_data .= "['Canada/Pacific','Canada/Pacific'],";
        $timezone_data .= "['Canada/Saskatchewan','Canada/Saskatchewan'],";
        $timezone_data .= "['Canada/Yukon','Canada/Yukon'],";
        $timezone_data .= "['Chile/Continental','Chile/Continental'],";
        $timezone_data .= "['Chile/EasterIsland','Chile/EasterIsland'],";
        $timezone_data .= "['America/Cuba','Cuba'],";
        $timezone_data .= "['EET','EET'],";
        $timezone_data .= "['EST','EST'],";
        $timezone_data .= "['EST5EDT','EST5EDT'],";
        $timezone_data .= "['Africa/Egypt','Egypt'],";
        $timezone_data .= "['Europe/Eire','Eire'],";
        $timezone_data .= "['Europe/Amsterdam','Europe/Amsterdam'],";
        $timezone_data .= "['Europe/Andorra','Europe/Andorra'],";
        $timezone_data .= "['Europe/Athens','Europe/Athens'],";
        $timezone_data .= "['Europe/Belfast','Europe/Belfast'],";
        $timezone_data .= "['Europe/Belgrade','Europe/Belgrade'],";
        $timezone_data .= "['Europe/Berlin','Europe/Berlin'],";
        $timezone_data .= "['Europe/Bratislava','Europe/Bratislava'],";
        $timezone_data .= "['Europe/Brussels','Europe/Brussels'],";
        $timezone_data .= "['Europe/Bucharest','Europe/Bucharest'],";
        $timezone_data .= "['Europe/Budapest','Europe/Budapest'],";
        $timezone_data .= "['Europe/Chisinau','Europe/Chisinau'],";
        $timezone_data .= "['Europe/Copenhagen','Europe/Copenhagen'],";
        $timezone_data .= "['Europe/Dublin','Europe/Dublin'],";
        $timezone_data .= "['Europe/Gibraltar','Europe/Gibraltar'],";
        $timezone_data .= "['Europe/Helsinki','Europe/Helsinki'],";
        $timezone_data .= "['Europe/Istanbul','Europe/Istanbul'],";
        $timezone_data .= "['Europe/Kaliningrad','Europe/Kaliningrad'],";
        $timezone_data .= "['Europe/Kiev','Europe/Kiev'],";
        $timezone_data .= "['Europe/Lisbon','Europe/Lisbon'],";
        $timezone_data .= "['Europe/Ljubljana','Europe/Ljubljana'],";
        $timezone_data .= "['Europe/London','Europe/London'],";
        $timezone_data .= "['Europe/Luxembourg','Europe/Luxembourg'],";
        $timezone_data .= "['Europe/Madrid','Europe/Madrid'],";
        $timezone_data .= "['Europe/Malta','Europe/Malta'],";
        $timezone_data .= "['Europe/Minsk','Europe/Minsk'],";
        $timezone_data .= "['Europe/Monaco','Europe/Monaco'],";
        $timezone_data .= "['Europe/Moscow','Europe/Moscow'],";
        $timezone_data .= "['Europe/Nicosia','Europe/Nicosia'],";
        $timezone_data .= "['Europe/Oslo','Europe/Oslo'],";
        $timezone_data .= "['Europe/Paris','Europe/Paris'],";
        $timezone_data .= "['Europe/Prague','Europe/Prague'],";
        $timezone_data .= "['Europe/Riga','Europe/Riga'],";
        $timezone_data .= "['Europe/Rome','Europe/Rome'],";
        $timezone_data .= "['Europe/Samara','Europe/Samara'],";
        $timezone_data .= "['Europe/San_Marino','Europe/San_Marino'],";
        $timezone_data .= "['Europe/Sarajevo','Europe/Sarajevo'],";
        $timezone_data .= "['Europe/Simferopol','Europe/Simferopol'],";
        $timezone_data .= "['Europe/Skopje','Europe/Skopje'],";
        $timezone_data .= "['Europe/Sofia','Europe/Sofia'],";
        $timezone_data .= "['Europe/Stockholm','Europe/Stockholm'],";
        $timezone_data .= "['Europe/Tallinn','Europe/Tallinn'],";
        $timezone_data .= "['Europe/Tirane','Europe/Tirane'],";
        $timezone_data .= "['Europe/Tiraspol','Europe/Tiraspol'],";
        $timezone_data .= "['Europe/Uzhgorod','Europe/Uzhgorod'],";
        $timezone_data .= "['Europe/Vaduz','Europe/Vaduz'],";
        $timezone_data .= "['Europe/Vatican','Europe/Vatican'],";
        $timezone_data .= "['Europe/Vienna','Europe/Vienna'],";
        $timezone_data .= "['Europe/Vilnius','Europe/Vilnius'],";
        $timezone_data .= "['Europe/Warsaw','Europe/Warsaw'],";
        $timezone_data .= "['Europe/Zagreb','Europe/Zagreb'],";
        $timezone_data .= "['Europe/Zaporozhye','Europe/Zaporozhye'],";
        $timezone_data .= "['Europe/Zurich','Europe/Zurich'],";
        $timezone_data .= "['Factory','Factory'],";
        $timezone_data .= "['GB','GB'],";
        $timezone_data .= "['GB-Eire','GB-Eire'],";
        $timezone_data .= "['GMT','GMT'],";
        $timezone_data .= "['Greenwich','Greenwich'],";
        $timezone_data .= "['HST','HST'],";
        //$timezone_data .= "['Hongkong','Hongkong'],";
        $timezone_data .= "['Atlantic/Iceland','Iceland'],";
        $timezone_data .= "['Indian/Antananarivo','Indian/Antananarivo'],";
        $timezone_data .= "['Indian/Chagos','Indian/Chagos'],";
        $timezone_data .= "['Indian/Christmas','Indian/Christmas'],";
        $timezone_data .= "['Indian/Cocos','Indian/Cocos'],";
        $timezone_data .= "['Indian/Comoro','Indian/Comoro'],";
        $timezone_data .= "['Indian/Kerguelen','Indian/Kerguelen'],";
        $timezone_data .= "['Indian/Mahe','Indian/Mahe'],";
        $timezone_data .= "['Indian/Maldives','Indian/Maldives'],";
        $timezone_data .= "['Indian/Mauritius','Indian/Mauritius'],";
        $timezone_data .= "['Indian/Mayotte','Indian/Mayotte'],";
        $timezone_data .= "['Indian/Reunion','Indian/Reunion'],";
        $timezone_data .= "['Mideast/Iran','Iran'],";
        $timezone_data .= "['Mideast/Israel','Israel'],";
        //$timezone_data .= "['Jamaica','Jamaica'],";
        $timezone_data .= "['Asia/Japan','Japan'],";
        //$timezone_data .= "['Kwajalein','Kwajalein'],";
        $timezone_data .= "['Africa/Libya','Libya'],";
        $timezone_data .= "['MET','MET'],";
        $timezone_data .= "['MST','MST'],";
        $timezone_data .= "['MST7MDT','MST7MDT'],";
        $timezone_data .= "['Mexico/BajaNorte','Mexico/BajaNorte'],";
        $timezone_data .= "['Mexico/BajaSur','Mexico/BajaSur'],";
        $timezone_data .= "['Mexico/General','Mexico/General'],";
        //$timezone_data .= "['Mideast/Riyadh87','Mideast/Riyadh87'],";
        //$timezone_data .= "['Mideast/Riyadh88','Mideast/Riyadh88'],";
        //$timezone_data .= "['Mideast/Riyadh89','Mideast/Riyadh89'],";
        $timezone_data .= "['NZ','NZ'],";
        $timezone_data .= "['NZ-CHAT','NZ-CHAT'],";
        $timezone_data .= "['US/Navajo','Navajo'],";
        $timezone_data .= "['PRC','PRC'],";
        $timezone_data .= "['PST8PDT','PST8PDT'],";
        $timezone_data .= "['Pacific/Apia','Pacific/Apia'],";
        $timezone_data .= "['Pacific/Auckland','Pacific/Auckland'],";
        $timezone_data .= "['Pacific/Chatham','Pacific/Chatham'],";
        $timezone_data .= "['Pacific/Easter','Pacific/Easter'],";
        $timezone_data .= "['Pacific/Efate','Pacific/Efate'],";
        $timezone_data .= "['Pacific/Enderbury','Pacific/Enderbury'],";
        $timezone_data .= "['Pacific/Fakaofo','Pacific/Fakaofo'],";
        $timezone_data .= "['Pacific/Fiji','Pacific/Fiji'],";
        $timezone_data .= "['Pacific/Funafuti','Pacific/Funafuti'],";
        $timezone_data .= "['Pacific/Galapagos','Pacific/Galapagos'],";
        $timezone_data .= "['Pacific/Gambier','Pacific/Gambier'],";
        $timezone_data .= "['Pacific/Guadalcanal','Pacific/Guadalcanal'],";
        $timezone_data .= "['Pacific/Guam','Pacific/Guam'],";
        $timezone_data .= "['Pacific/Honolulu','Pacific/Honolulu'],";
        $timezone_data .= "['Pacific/Johnston','Pacific/Johnston'],";
        $timezone_data .= "['Pacific/Kiritimati','Pacific/Kiritimati'],";
        $timezone_data .= "['Pacific/Kosrae','Pacific/Kosrae'],";
        $timezone_data .= "['Pacific/Kwajalein','Pacific/Kwajalein'],";
        $timezone_data .= "['Pacific/Majuro','Pacific/Majuro'],";
        $timezone_data .= "['Pacific/Marquesas','Pacific/Marquesas'],";
        $timezone_data .= "['Pacific/Midway','Pacific/Midway'],";
        $timezone_data .= "['Pacific/Nauru','Pacific/Nauru'],";
        $timezone_data .= "['Pacific/Niue','Pacific/Niue'],";
        $timezone_data .= "['Pacific/Norfolk','Pacific/Norfolk'],";
        $timezone_data .= "['Pacific/Noumea','Pacific/Noumea'],";
        $timezone_data .= "['Pacific/Pago_Pago','Pacific/Pago_Pago'],";
        $timezone_data .= "['Pacific/Palau','Pacific/Palau'],";
        $timezone_data .= "['Pacific/Pitcairn','Pacific/Pitcairn'],";
        $timezone_data .= "['Pacific/Ponape','Pacific/Ponape'],";
        $timezone_data .= "['Pacific/Port_Moresby','Pacific/Port_Moresby'],";
        $timezone_data .= "['Pacific/Rarotonga','Pacific/Rarotonga'],";
        $timezone_data .= "['Pacific/Saipan','Pacific/Saipan'],";
        $timezone_data .= "['Pacific/Samoa','Pacific/Samoa'],";
        $timezone_data .= "['Pacific/Tahiti','Pacific/Tahiti'],";
        $timezone_data .= "['Pacific/Tarawa','Pacific/Tarawa'],";
        $timezone_data .= "['Pacific/Tongatapu','Pacific/Tongatapu'],";
        $timezone_data .= "['Pacific/Truk','Pacific/Truk'],";
        $timezone_data .= "['Pacific/Wake','Pacific/Wake'],";
        $timezone_data .= "['Pacific/Wallis','Pacific/Wallis'],";
        $timezone_data .= "['Pacific/Yap','Pacific/Yap'],";
        $timezone_data .= "['Europe/Poland','Poland'],";
        $timezone_data .= "['Europe/Portugal','Portugal'],";
        $timezone_data .= "['ROC','ROC'],";
        $timezone_data .= "['ROK','ROK'],";
        //$timezone_data .= "['Singapore','Singapore'],";
        $timezone_data .= "['Europe/Turkey','Turkey'],";
        $timezone_data .= "['UCT','UCT'],";
        $timezone_data .= "['UTC','UTC'],";
        $timezone_data .= "['Universal','Universal'],";
        $timezone_data .= "['W-SU','W-SU'],";
        $timezone_data .= "['WET','WET'],";
        $timezone_data .= "['Africa/Zulu','Zulu']]";

//NTP Server Array
$ntp_server_fields="['display', 'value']";
$ntp_server_data = "[['clock.isc.org', 'clock.isc.org'],";
        $ntp_server_data .= "['time.nist.gov','time.nist.gov'],"; 
        $ntp_server_data .= "['time-a.nist.gov','time-a.nist.gov'],"; 
        $ntp_server_data .= "['time-b.nist.gov','time-b.nist.gov'],"; 
        $ntp_server_data .= "['time-c.nist.gov','time-c.nist.gov'],"; 
        $ntp_server_data .= "['time-nw.nist.gov','time-nw.nist.gov'],"; 
        $ntp_server_data .= "['ntp.nasa.gov','ntp.nasa.gov'],"; 
        $ntp_server_data .= "['ntp.nict.jp','ntp.nict.jp'],";
        $ntp_server_data .= "['ntp.ring.gr.jp','ntp.ring.gr.jp'],";
        $ntp_server_data .= "['lerc-dns.lerc.nasa.gov','lerc-dns.lerc.nasa.gov'],"; 
        $ntp_server_data .= "['ntp0.mcs.anl.gov','ntp0.mcs.anl.gov'],";
        $ntp_server_data .= "['pool.ntp.org','pool.ntp.org'],";
        $ntp_server_data .= "['asia.pool.ntp.org','asia.pool.ntp.org '],";
        $ntp_server_data .= "['europe.pool.ntp.org','europe.pool.ntp.org'],";
        $ntp_server_data .= "['north-america.pool.ntp.org','north-america.pool.ntp.org'],";
        $ntp_server_data .= "['oceania.pool.ntp.org','oceania.pool.ntp.org'],";
        $ntp_server_data .= "['south-america.pool.ntp.org','south-america.pool.ntp.org']]";


$timezone = shell_exec("ls -l /etc/localtime");
preg_match("@/usr/share/zoneinfo/(.+)@",$timezone,$matches);

$model_name=trim(shell_exec('cat /proc/thecus_io  | awk \'/^MODELNAME:/{print $2}\''));

$tpl->assign('words',$words);
$tpl->assign('ntp_cfg_mode',$ntp_cfg_mode);
$tpl->assign('ntp_server_mode',$ntp_server_mode);
$tpl->assign('ntp_server',$ntp_server);
$tpl->assign('datetime',$datetime);
$tpl->assign('date_str',$date_str);
$tpl->assign('timezone_fields',$timezone_fields);
$tpl->assign('timezone_data',$timezone_data);
$tpl->assign('ntp_server_fields',$ntp_server_fields);
$tpl->assign('ntp_server_data',$ntp_server_data);
$tpl->assign('matches',$matches);
$tpl->assign('form_action','setmain.php?fun=settime');
$tpl->assign('time_str',$time_str);

if($_REQUEST['update']==1){

die(json_encode(array('date_str'=>$date_str,
            'time_str'=>$time_str
           )));
}
?>
